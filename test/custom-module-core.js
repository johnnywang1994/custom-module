!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CustomModule=t()}(this,(function(){"use strict";function e(e,t){e.insertAdjacentElement("afterend",t)}function t(){CustomModule.defineLoader({name:"babel",setup(){window.Babel||console.warn('please install "https://unpkg.com/@babel/standalone/babel.min.js" to use babel.')},transform({code:e},{loaderOptions:t={}}){if(!window.Babel)return e;const{transform:s}=Babel;t.babel=t.babel||{presets:["env"]};const{code:n}=s(e,t.babel);return t.babel.presets.includes("env")?`\nconst exports = {};\n\n${n.replace(/(var.*)(?=\nexports)/g,"export $1")}\n\nexport default exports['default'];\n        `:n}})}function s(){window.__custom_css_cache__=window.__custom_css_cache__||{},CustomModule.defineLoader({name:"css",setup(){window.__custom_css_loader__=(e,t)=>{if(!__custom_css_cache__[t]){const s=__custom_css_cache__[t]=function(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}(e,"text/css"),n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",s),document.head.appendChild(n)}}},transform:({code:e,uid:t})=>`\nconst code = \`${e}\`;\n\nwindow.__custom_css_loader__(code, "${t}");\n\nexport default code;\n      `})}function n(){CustomModule.defineLoader({name:"react",setup(){window.Babel||console.warn('please install "https://unpkg.com/@babel/standalone/babel.min.js" to use react.')},transform({code:e}){if(!window.Babel)return e;const{transform:t}=Babel,{code:s}=t(e,{presets:["react"]});return s},imports:{react:"https://unpkg.com/@esm-bundle/react/esm/react.development.js","react-dom":"https://unpkg.com/@esm-bundle/react-dom/esm/react-dom.development.js","react-is":"https://unpkg.com/@esm-bundle/react-is/esm/react-is.development.js","styled-components":"https://unpkg.com/@esm-bundle/styled-components/esm/styled-components.browser.min.js"}})}function o(){window.__custom_css_cache__=window.__custom_css_cache__||{},CustomModule.defineLoader({name:"sass",setup(){window.__custom_sass_loader__=(e,t,s)=>{__custom_css_cache__[t]||(window.Sass?Sass.compile(e,s,(function(e){const s=__custom_css_cache__[t]=function(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}(e.text,"text/css"),n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",s),document.head.appendChild(n)})):console.warn('please install "https://cdn.jsdelivr.net/npm/sass.js@0.11.1/dist/sass.sync.js" to compile sass file.'))}},transform({code:e,uid:t,filename:s},{loaderOptions:n={}}){const o={indentedSyntax:!1,...n.sass||{}};return s.endsWith(".sass")?o.indentedSyntax=!0:s.endsWith(".scss")&&(o.indentedSyntax=!1),`\nconst code = \`${e}\`;\nconst options = ${JSON.stringify(o,null,2)};\n\nwindow.__custom_sass_loader__(code, "${t}", options);\n\nexport default code;\n      `}})}function c(){window.__custom_vue_cache__={},CustomModule.defineLoader({name:"vue",setup(){function e(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}function t(e){return"function"==typeof e}window.__custom_vue_loader__=(s,{code:n,uid:o,filepath:c})=>{if(!__custom_vue_cache__[o]){const{parse:r,compileScript:i,compileTemplate:a,compileStyleAsync:u}=s,{descriptor:l}=r(window.atob(n),{filename:c}),{content:d}=i(l,{id:o});let m=!1,p=!1;l.styles.forEach((({attrs:e,content:s,scoped:n,module:r})=>{r&&(m=!0),n&&(p=!0),u({source:s,id:`data-v-${o}`,filename:c,scoped:n,trim:!0}).then((({code:s})=>{!function(e,s,n){["sass","scss"].includes(n)?t(window.__custom_sass_loader__)?window.__custom_sass_loader__(e,s,{indentedSyntax:"sass"===n}):console.warn("Please install custom-sass-loader to compile SFC styles"):t(window.__custom_css_loader__)?window.__custom_css_loader__(e,s):console.warn("Please install custom-css-loader to compile SFC styles")}(s,o,e.lang)}))}));let _="";if(l.template){const{code:e}=a({id:o,filename:c,source:l.template.content,scoped:p,slotted:l.slotted,compilerOptions:{scopeId:p?`data-v-${o}`:null}});_=e}__custom_vue_cache__[o]={template:e(_,"text/javascript"),script:e(d,"text/javascript"),scoped:p,cssModules:m}}}},transform({code:e,uid:t,filepath:s,filename:n}){const o={code:window.btoa(e),uid:t,filepath:s,filename:n};return`\nimport {\n  parse,\n  compileScript,\n  compileTemplate,\n  compileStyleAsync\n} from '@vue/compiler-sfc';\n\nconst uid = "${t}";\nconst compiler = {\n  parse,\n  compileScript,\n  compileTemplate,\n  compileStyleAsync\n};\n\nwindow.__custom_vue_loader__(compiler, ${JSON.stringify(o)});\n\nconst script = (await import(__custom_vue_cache__[uid].script)).default;\n\nif (__custom_vue_cache__[uid].template) {\n  const { render } = (await import(__custom_vue_cache__[uid].template));\n  script.render = render;\n}\n\nif (__custom_vue_cache__[uid].scoped) script.__scopeId = \`data-v-${t}\`;\n\n// TODO: css module support\nif (__custom_vue_cache__[uid].cssModules) {\n  script.__cssModules = {}\n}\n\nexport default script;\n      `},imports:{vue:"https://unpkg.com/vue@3/dist/vue.esm-browser.js","@vue/compiler-sfc":"https://cdn.jsdelivr.net/npm/@vue/compiler-sfc@3/dist/compiler-sfc.esm-browser.js"}})}function r(){t(),n(),s(),o(),c()}var i={BabelLoader:t,CssLoader:s,ReactLoader:n,SassLoader:o,VueLoader:c,registerDefault:r};const a=document.currentScript||document.querySelector("script"),u={imports:{},scopes:{}},l={},d=[],m=new Set;let p={};async function _(e){let t=e.innerHTML;if(e.hasAttribute("src")){t=function(e){const t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),200===t.status)return t.responseText;throw new Error(t.statusText)}(e.getAttribute("src")),e.innerHTML=t}let s=e.getAttribute("loader");if(s){s=s.split(/\s+/).map((e=>l[e]));const n=function(e){return function(t,s){let n=-1;return async function o(c){if(c<=n)return Promise.reject(new Error("called multiple times"));n=c;let r=e[c];if(!r)return Promise.resolve();try{return t.code=await Promise.resolve(r(t,s)),o.call(null,c+1)}catch(e){return Promise.reject(e)}}(0)}}(s.map((e=>e.transform))),o=function(e,t){const s=e.getAttribute("src")||"";return{code:t,filepath:s,uid:"u"+Math.random().toString(36).slice(6),filename:s.substring(s.lastIndexOf("/")+1)}}(e,t);await n(o,{loaderOptions:p.loaders}),t=o.code}return function(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}(t,"text/javascript")}async function f(){const t=await async function(){const e=p.moduleType,t=document.querySelectorAll(`script[type="${e}"]`),s={},n=[];return[...t].forEach((e=>{const{id:t}=e;if(t){const o=_(e).then((n=>{s[t]=n,e.hasAttribute("mount")&&d.push(n)}));n.push(o)}})),await Promise.all(n),s}();if(document.querySelector('script[type="importmap"]'))throw Error("importmap already defined");const s=p.moduleType,n=document.querySelector(`script[type="${s}-importmap"]`);if(n){const e=JSON.parse(n.textContent);Object.assign(u.imports,e.imports),Object.assign(u.scopes,e.scopes)}Object.assign(u.imports,t);const o=document.createElement("script");return o.setAttribute("type","importmap"),o.textContent=JSON.stringify(u),e(a,o),o}async function w(t={}){p=Object.assign({esmShimUrl:"https://ga.jspm.io/npm:es-module-shims@1.4.6/dist/es-module-shims.js",moduleType:"custom-module",loaders:{}},t),function(e){if(e){const s=document.createElement("script");s.setAttribute("async",!0),s.setAttribute("src",e),t=s,a.insertAdjacentElement("beforebegin",t)}var t}(p.esmShimUrl),await async function(){const e=[];Object.keys(l).forEach((t=>{const s=l[t];if("function"==typeof s.setup){const t=Promise.resolve(s.setup());e.push(t)}})),await Promise.all(e)}();!function(t){for(const s of d)if(!m.has(s)){const n=document.createElement("script");n.setAttribute("type","module"),n.setAttribute("src",s),e(t,n),m.add(s)}}(await f())}return a.hasAttribute("setup")&&w(),window.customImport=async function(e){const{imports:t}=u;let s=t[e];if(!s){const n=p.moduleType||"custom-module",o=document.querySelector(`script[type="${n}"]#${e}`);o&&(s=await _(o),t[e]=s)}if(s){return await import(s)}return null},{setup:w,defineLoader:function(e){const{name:t,imports:s}=e;t&&!l[t]&&(l[t]=e,s&&Object.assign(u.imports,s))},loaders:i,importmap:u,registerDefault:r}}));