!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CustomModule=t()}(this,(function(){"use strict";function e(e,t){e.insertAdjacentElement("afterend",t)}function t(){CustomModule.defineLoader({name:"babel",setup(){window.Babel?window.__custom_babel_loader__=({code:e,filepath:t},s={})=>{if(!window.Babel)return e;const{availablePresets:o,availablePlugins:n,transform:c}=Babel,{code:r}=c(e,s.babel||{presets:[[o.env,{modules:!1}]],plugins:[[n["proposal-decorators"],{version:"legacy"}],n["proposal-class-properties"]],filename:t});return r}:console.warn('please install "https://unpkg.com/@babel/standalone/babel.min.js" to use babel.')},transform:(e,{loaderOptions:t={}})=>window.__custom_babel_loader__(e,t)})}function s(){window.__custom_css_cache__=window.__custom_css_cache__||{},CustomModule.defineLoader({name:"css",setup(){window.__custom_css_loader__=(e,t)=>{if(!__custom_css_cache__[t]){const s=__custom_css_cache__[t]=function(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}(e,"text/css"),o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",s),document.head.appendChild(o)}}},transform:({code:e,uid:t})=>`\nconst code = \`${e}\`;\n\nwindow.__custom_css_loader__(code, "${t}");\n\nexport default code;\n      `})}function o(){CustomModule.defineLoader({name:"react",setup(){window.Babel?window.__custom_react_loader__=({code:e,filepath:t},s={})=>{if(!window.Babel)return e;const{availablePresets:o,availablePlugins:n,transform:c}=Babel,{code:r}=c(e,s.react||{presets:[o.react],plugins:[[n["proposal-decorators"],{version:"legacy"}],n["proposal-class-properties"]],filename:t});return r}:console.warn('please install "https://unpkg.com/@babel/standalone/babel.min.js" to use react.')},transform:(e,{loaderOptions:t={}})=>window.__custom_react_loader__(e,t),imports:{react:"https://unpkg.com/@esm-bundle/react/esm/react.development.js","react-dom":"https://unpkg.com/@esm-bundle/react-dom/esm/react-dom.development.js","react-is":"https://unpkg.com/@esm-bundle/react-is/esm/react-is.development.js","styled-components":"https://unpkg.com/@esm-bundle/styled-components/esm/styled-components.browser.min.js"}})}function n(){window.__custom_css_cache__=window.__custom_css_cache__||{},CustomModule.defineLoader({name:"sass",setup(){window.__custom_sass_loader__=(e,t,s)=>{__custom_css_cache__[t]||(window.Sass?Sass.compile(e,s,(function(e){const s=__custom_css_cache__[t]=function(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}(e.text,"text/css"),o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",s),document.head.appendChild(o)})):console.warn('please install "https://cdn.jsdelivr.net/npm/sass.js@0.11.1/dist/sass.sync.js" to compile sass file.'))}},transform({code:e,uid:t,filename:s},{loaderOptions:o={}}){const n={indentedSyntax:!1,...o.sass||{}};return s.endsWith(".sass")?n.indentedSyntax=!0:s.endsWith(".scss")&&(n.indentedSyntax=!1),`\nconst code = \`${e}\`;\nconst options = ${JSON.stringify(n,null,2)};\n\nwindow.__custom_sass_loader__(code, "${t}", options);\n\nexport default code;\n      `}})}function c(){window.__custom_vue_cache__={},CustomModule.defineLoader({name:"vue",setup(){function e(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}function t(e){return"function"==typeof e}window.__custom_vue_loader__=(s,{code:o,uid:n,filepath:c})=>{if(!__custom_vue_cache__[n]){const{parse:r,compileScript:i,compileTemplate:a,compileStyleAsync:l}=s,{descriptor:u}=r(window.decodeURI(o),{filename:c}),{script:d,scriptSetup:p}=u,m=d&&d.lang,_=p&&p.lang,f="ts"===m||"tsx"===m||"ts"===_||"tsx"===_;let{content:w}=i(u,{id:n});f&&(w=window.__custom_ts_loader__({code:w,filepath:c+".ts"}));let b=!1,h=!1;u.styles.forEach((({attrs:e,content:s,scoped:o,module:r},i)=>{r&&(b=!0),o&&(h=!0);const a=n+i;l({source:s,id:`data-v-${n}`,filename:c,scoped:o,trim:!0}).then((({code:s})=>{!function(e,s,o){["sass","scss"].includes(o)?t(window.__custom_sass_loader__)?window.__custom_sass_loader__(e,s,{indentedSyntax:"sass"===o}):console.warn("Please install custom-sass-loader to compile SFC styles"):t(window.__custom_css_loader__)?window.__custom_css_loader__(e,s):console.warn("Please install custom-css-loader to compile SFC styles")}(s,a,e.lang)}))}));let y="";if(u.template){const{code:e}=a({id:n,filename:c,source:u.template.content,scoped:h,slotted:u.slotted,compilerOptions:{scopeId:h?`data-v-${n}`:null}});y=e}__custom_vue_cache__[n]={template:e(y,"text/javascript"),script:e(w,"text/javascript"),scoped:h,cssModules:b}}}},transform({code:e,uid:t,filepath:s,filename:o}){const n={code:window.encodeURI(e),uid:t,filepath:s,filename:o};return`\nimport {\n  parse,\n  compileScript,\n  compileTemplate,\n  compileStyleAsync\n} from '@vue/compiler-sfc';\n\nconst uid = "${t}";\nconst compiler = {\n  parse,\n  compileScript,\n  compileTemplate,\n  compileStyleAsync\n};\n\nwindow.__custom_vue_loader__(compiler, ${JSON.stringify(n)});\n\nconst script = (await import(__custom_vue_cache__[uid].script)).default;\n\nif (__custom_vue_cache__[uid].template) {\n  const { render } = (await import(__custom_vue_cache__[uid].template));\n  script.render = render;\n}\n\nif (__custom_vue_cache__[uid].scoped) script.__scopeId = \`data-v-${t}\`;\n\n// TODO: css module support\nif (__custom_vue_cache__[uid].cssModules) {\n  script.__cssModules = {}\n}\n\nexport default script;\n      `},imports:{vue:"https://unpkg.com/vue@3/dist/vue.esm-browser.js","@vue/compiler-sfc":"https://cdn.jsdelivr.net/npm/@vue/compiler-sfc@3/dist/compiler-sfc.esm-browser.js"}})}function r(){CustomModule.defineLoader({name:"typescript",setup(){window.Babel?window.__custom_ts_loader__=({code:e,filepath:t},s={})=>{if(!window.Babel)return e;const{availablePresets:o,availablePlugins:n,transform:c}=Babel,{code:r}=c(e,s.typescript||{presets:[o.typescript],plugins:[[n["proposal-decorators"],{version:"legacy"}],n["proposal-class-properties"]],filename:t});return r}:console.warn('please install "https://unpkg.com/@babel/standalone/babel.min.js" to use typescript.')},transform:(e,{loaderOptions:t={}})=>window.__custom_ts_loader__(e,t),imports:{}})}function i(){t(),o(),s(),n(),c(),r()}var a={BabelLoader:t,CssLoader:s,ReactLoader:o,SassLoader:n,VueLoader:c,TsLoader:r,registerDefault:i};const l=document.currentScript||document.querySelector("script"),u={imports:{},scopes:{}},d={},p=[],m=new Set;let _={};async function f(e){let t=e.textContent;if(e.hasAttribute("src")){t=function(e){const t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),200===t.status)return t.responseText;throw new Error(t.statusText)}(e.getAttribute("src")),e.textContent=t}else e.hasAttribute("decode")&&(t=e.textContent=decodeURI(e.textContent));let s=e.getAttribute("loader");if(s){s=s.split(/\s+/).map((e=>d[e]));const o=function(e){return function(t,s){let o=-1;return async function n(c){if(c<=o)return Promise.reject(new Error("called multiple times"));o=c;let r=e[c];if(!r)return Promise.resolve();try{return t.code=await Promise.resolve(r(t,s)),n.call(null,c+1)}catch(e){return Promise.reject(e)}}(0)}}(s.map((e=>e.transform))),n=function(e,t){const s=e.getAttribute("src")||e.id;return{code:t,filepath:s,uid:"u"+Math.random().toString(36).slice(6),filename:s.substring(s.lastIndexOf("/")+1)}}(e,t);await o(n,{loaderOptions:_.loaders}),t=n.code}return function(e,t="text/plain"){const s=new Blob([e],{type:t});return URL.createObjectURL(s)}(t,"text/javascript")}async function w(){const t=await async function(){const e=_.moduleType,t=document.querySelectorAll(`script[type="${e}"]`),s={},o=[];return[...t].forEach((e=>{const{id:t}=e;if(t){const n=f(e).then((o=>{s[t]=o,e.hasAttribute("mount")&&p.push(o)}));o.push(n)}})),await Promise.all(o),s}();if(document.querySelector('script[type="importmap"]'))throw Error("importmap already defined");const s=_.moduleType,o=document.querySelector(`script[type="${s}-importmap"]`);if(o){const e=JSON.parse(o.textContent);Object.assign(u.imports,e.imports),Object.assign(u.scopes,e.scopes)}Object.assign(u.imports,t);const n=document.createElement("script");return n.setAttribute("type","importmap"),n.textContent=JSON.stringify(u),e(l,n),n}async function b(t={}){_=Object.assign({esmShimUrl:"https://ga.jspm.io/npm:es-module-shims@1.4.6/dist/es-module-shims.js",moduleType:"custom-module",loaders:{}},t),function(e){if(e){const s=document.createElement("script");s.setAttribute("async",!0),s.setAttribute("src",e),t=s,l.insertAdjacentElement("beforebegin",t)}var t}(_.esmShimUrl),await async function(){const e=[];Object.keys(d).forEach((t=>{const s=d[t];if("function"==typeof s.setup){const t=Promise.resolve(s.setup());e.push(t)}})),await Promise.all(e)}();!function(t){for(const s of p)if(!m.has(s)){const o=document.createElement("script");o.setAttribute("type","module"),o.setAttribute("src",s),e(t,o),m.add(s)}}(await w())}return l.hasAttribute("setup")&&b(),window.customImport=async function(e){const{imports:t}=u;let s=t[e];if(!s){const o=_.moduleType||"custom-module",n=document.querySelector(`script[type="${o}"]#${e}`);n&&(s=await f(n),t[e]=s)}if(s){return await import(s)}return null},{setup:b,defineLoader:function(e){const{name:t,imports:s}=e;t&&!d[t]&&(d[t]=e,s&&Object.assign(u.imports,s))},loaders:a,importmap:u,registerDefault:i}}));